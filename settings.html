      <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="A professional Pomodoro timer application to boost your productivity">
  <meta name="theme-color" content="#121214">
  <title>Settings - Pomodoro Timer</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/svg+xml" href="assets/logo.png">
  <link rel="apple-touch-icon" href="assets/icons/clock-3.png">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

  <link rel="stylesheet" href="css/themes.css">
  <link rel="stylesheet" href="css/animated-background.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
  <style>
    body {
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    .glass-card {
      background: var(--glass-card-bg, rgba(17, 25, 40, 0.75));
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid var(--glass-card-border, rgba(255,255,255,0.08));
      border-radius: 1rem;
      box-shadow: 0 6px 24px rgba(0, 0, 0, 0.2);
      color: rgb(var(--card-foreground-rgb));
      position: relative;
      overflow: hidden;
    }
    .page-transition {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background-color: rgb(var(--background-rgb));
      z-index: 9999; pointer-events: none; opacity: 1;
      transition: opacity 0.3s ease-in-out;
    }
    .page-transition.active { opacity: 1; }

    /* Custom slider styles */
    .slider-container { position: relative; height: 36px; display: flex; align-items: center; }
    .slider {
      -webkit-appearance: none; width: 100%; height: 10px; border-radius: 5px;
      background: var(--slider-track-bg); outline: none; position: relative; z-index: 1;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
    }
    .slider::-webkit-slider-thumb {
      -webkit-appearance: none; width: 24px; height: 24px; border-radius: 50%;
      background: #fff; border: 3px solid var(--slider-thumb-border);
      box-shadow: 0 1px 4px rgba(0,0,0,0.3); cursor: pointer; transition: transform 0.1s;
    }
    .slider::-webkit-slider-thumb:hover { transform: scale(1.1); }
    .slider::-moz-range-thumb { /* Similar for Firefox */
      width: 24px; height: 24px; border-radius: 50%; background: #fff;
      border: 3px solid var(--slider-thumb-border); box-shadow: 0 1px 4px rgba(0,0,0,0.3);
      cursor: pointer; transition: transform 0.1s;
    }
    .slider::-moz-range-thumb:hover { transform: scale(1.1); }

    /* Toggle switch styles */
    .toggle-container { position: relative; display: inline-block; width: 50px; height: 28px; }
    .toggle-container input { opacity: 0; width: 0; height: 0; }
    .toggle-slider {
      position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
      background-color: rgba(var(--foreground-rgb), 0.2); transition: .3s; border-radius: 28px;
    }
    .toggle-slider:before {
      position: absolute; content: ""; height: 20px; width: 20px;
      left: 4px; bottom: 4px; background-color: white; transition: .3s; border-radius: 50%;
    }
    input:checked + .toggle-slider { background-color: var(--toggle-active-bg); }
    input:checked + .toggle-slider:before { transform: translateX(22px); }
    
    /* Theme preview styles */
    .theme-preview {
      position: relative; overflow: hidden; border-radius: 0.75rem;
      transition: all 0.2s ease-in-out; cursor: pointer;
      border: 2px solid transparent;
      background-color: rgb(var(--card-background-rgb)); /* Ensure bg for preview box */
    }
    .theme-preview:hover { transform: translateY(-4px); box-shadow: 0 8px 20px rgba(0,0,0,0.25); }
    .theme-preview.active { border-color: rgb(var(--primary-rgb)) !important; }
    .theme-preview-check {
      position: absolute; top: 8px; right: 8px; width: 20px; height: 20px;
      border-radius: 50%; background: rgb(var(--primary-rgb));
      display: flex; align-items: center; justify-content: center;
      opacity: 0; transform: scale(0.5); transition: opacity 0.2s, transform 0.2s;
    }
    .theme-preview.active .theme-preview-check { opacity: 1; transform: scale(1); }
    .theme-preview .theme-color-box { width: 100%; height: 40px; border-radius: 0.375rem; margin-bottom: 0.5rem; }

    .settings-section:hover { transform: translateX(4px); } /* Subtle hover effect for sections */
    
    @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-3px); } 100% { transform: translateY(0px); } }
    nav#main-navbar { animation: float 7s ease-in-out infinite; }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <div id="page-transition"></div>
  <div id="settings-feedback" aria-live="polite" class="sr-only"></div> <!-- For screen reader announcements -->


  <!-- Navigation (same as home.html) -->
  <nav class="glass-nav fixed top-0 left-0 right-0 z-50 backdrop-blur-xl" id="main-navbar">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex justify-between items-center h-16">
        <a href="index.html" class="flex items-center group">
          <div class="flex flex-col">
            <span class="text-2xl font-bold tracking-tight">POMODORO</span>
            <span class="text-xs text-opacity-60 tracking-widest mt-[-4px]">FOCUS. BREAK. REPEAT.</span>
          </div>
        </a>
        <div class="hidden md:flex items-center space-x-1">
          <a href="home.html" class="nav-link px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400">
            <span class="text-sm font-medium transition-all duration-300">Timer</span>
          </a>
          <a href="dashboard.html" class="nav-link px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400">
            <span class="text-sm font-medium transition-all duration-300">Dashboard</span>
          </a>
          <a href="settings.html" class="nav-link px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400" aria-current="page">
            <span class="text-sm font-medium transition-all duration-300">Settings</span>
          </a>
        </div>
        <div class="flex items-center">
            <div class="relative group ml-4">
                <select id="theme-select" class="p-2 rounded-md text-sm focus:outline-none focus:ring-2 ring-inset focus:ring-[rgb(var(--primary-rgb))] glass-dropdown appearance-none pr-8" aria-label="Select Theme">
                  <option value="dark">Dark</option>
                  <option value="dim">Dim</option>
                  <option value="purple">Purple</option>
                  <option value="ocean">Ocean</option>
                  <option value="sunset">Sunset</option>
                  <option value="auto">Auto (System)</option>
                </select>
                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                    <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                </div>
            </div>
            <button class="md:hidden text-white focus:outline-none ml-3" id="mobile-menu-button" aria-label="Open menu">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
            </button>
        </div>
      </div>
    </div>
     <!-- Mobile Menu (hidden by default) -->
    <div id="mobile-menu" class="md:hidden hidden bg-[var(--nav-bg)] border-t border-[var(--nav-border)]">
        <a href="home.html" class="block px-4 py-3 text-sm hover:bg-[rgba(var(--primary-rgb),0.1)]">Timer</a>
        <a href="dashboard.html" class="block px-4 py-3 text-sm hover:bg-[rgba(var(--primary-rgb),0.1)]">Dashboard</a>
        <a href="settings.html" class="block px-4 py-3 text-sm hover:bg-[rgba(var(--primary-rgb),0.1)]" aria-current="page">Settings</a>
    </div>
    <div class="h-px bg-gradient-to-r from-transparent via-[rgba(var(--primary-rgb),0.3)] to-transparent"></div>
  </nav>

  <main class="flex-grow pt-24 pb-10 px-4">
    <div class="max-w-2xl mx-auto">
      <h1 class="text-3xl font-bold mb-8">Settings</h1>

      <div class="glass-card animated-border rounded-xl p-6 mb-8 settings-section">
        <h2 class="text-xl font-semibold mb-6 flex items-center gap-2.5">
          <svg class="h-6 w-6 text-[rgb(var(--primary-rgb))]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
          Timer Settings
        </h2>
        <div class="space-y-6">
          <div>
            <div class="flex justify-between items-center mb-1">
              <label for="focus-duration" class="text-[rgb(var(--foreground-rgb))] text-sm">Focus Duration</label>
              <span id="focus-duration-display" class="text-[rgb(var(--primary-rgb))] font-medium text-sm">25 min</span>
            </div>
            <div class="slider-container"><input type="range" id="focus-duration" min="5" max="60" step="5" value="25" class="slider"></div>
          </div>
          <div>
            <div class="flex justify-between items-center mb-1">
              <label for="short-break-duration" class="text-[rgb(var(--foreground-rgb))] text-sm">Short Break Duration</label>
              <span id="short-break-duration-display" class="text-green-400 font-medium text-sm">5 min</span>
            </div>
            <div class="slider-container"><input type="range" id="short-break-duration" min="1" max="15" step="1" value="5" class="slider"></div>
          </div>
          <div>
            <div class="flex justify-between items-center mb-1">
              <label for="long-break-duration" class="text-[rgb(var(--foreground-rgb))] text-sm">Long Break Duration</label>
              <span id="long-break-duration-display" class="text-blue-400 font-medium text-sm">15 min</span>
            </div>
            <div class="slider-container"><input type="range" id="long-break-duration" min="5" max="30" step="5" value="15" class="slider"></div>
          </div>
          <div>
            <div class="flex justify-between items-center mb-1">
              <label for="sessions-before-long-break" class="text-[rgb(var(--foreground-rgb))] text-sm">Sessions Before Long Break</label>
              <span id="sessions-before-long-break-display" class="text-purple-400 font-medium text-sm">4 sessions</span>
            </div>
            <div class="slider-container"><input type="range" id="sessions-before-long-break" min="2" max="6" step="1" value="4" class="slider"></div>
          </div>
        </div>
      </div>

      <div class="glass-card animated-border rounded-xl p-6 mb-8 settings-section">
        <h2 class="text-xl font-semibold mb-6 flex items-center gap-2.5">
          <svg class="h-6 w-6 text-green-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V4a2 2 0 10-4 0v1.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/></svg>
          Notifications & Sound
        </h2>
        <div class="space-y-5">
          <div class="flex items-center justify-between">
            <label for="enable-notifications" class="text-[rgb(var(--foreground-rgb))] text-sm">Desktop Notifications</label>
            <label class="toggle-container"><input type="checkbox" id="enable-notifications" checked><span class="toggle-slider"></span></label>
          </div>
          <div class="flex items-center justify-between">
            <label for="enable-sounds" class="text-[rgb(var(--foreground-rgb))] text-sm">Sound Effects</label>
            <label class="toggle-container"><input type="checkbox" id="enable-sounds" checked><span class="toggle-slider"></span></label>
          </div>
          <div>
            <div class="flex justify-between items-center mb-2">
              <label for="volume-grid" class="text-[rgb(var(--foreground-rgb))] text-sm">Sound Volume</label>
              <span id="volume-display" class="text-[rgb(var(--primary-rgb))] font-medium text-sm">80%</span>
            </div>
            <div id="volume-grid" class="grid grid-cols-4 sm:grid-cols-6 gap-2"></div>
          </div>
        </div>
      </div>

      <div class="glass-card animated-border rounded-xl p-6 mb-8 settings-section">
        <h2 class="text-xl font-semibold mb-6 flex items-center gap-2.5">
          <svg class="h-6 w-6 text-purple-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" /></svg>
          Theme Settings
        </h2>
        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4" id="theme-previews-container">
          <!-- Theme previews from original HTML, but ensure data-theme is used by JS -->
          <div class="theme-preview p-3" data-theme="dark" aria-label="Dark theme" title="Dark Theme">
            <div class="theme-preview-check"><svg class="h-4 w-4 text-white" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path></svg></div>
            <div class="theme-color-box" style="background: #6366f1;"></div><span class="text-xs font-medium">Dark</span>
          </div>
          <div class="theme-preview p-3" data-theme="dim" aria-label="Dim theme" title="Dim Theme">
            <div class="theme-preview-check"><svg class="h-4 w-4 text-white" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path></svg></div>
            <div class="theme-color-box" style="background: #7c3aed;"></div><span class="text-xs font-medium">Dim</span>
          </div>
          <div class="theme-preview p-3" data-theme="purple" aria-label="Purple theme" title="Purple Theme">
            <div class="theme-preview-check"><svg class="h-4 w-4 text-white" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path></svg></div>
            <div class="theme-color-box" style="background: #8b5cf6;"></div><span class="text-xs font-medium">Purple</span>
          </div>
          <div class="theme-preview p-3" data-theme="ocean" aria-label="Ocean theme" title="Ocean Theme">
            <div class="theme-preview-check"><svg class="h-4 w-4 text-white" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path></svg></div>
            <div class="theme-color-box" style="background: #0ea5e9;"></div><span class="text-xs font-medium">Ocean</span>
          </div>
          <div class="theme-preview p-3" data-theme="sunset" aria-label="Sunset theme" title="Sunset Theme">
            <div class="theme-preview-check"><svg class="h-4 w-4 text-white" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path></svg></div>
            <div class="theme-color-box" style="background: #f97316;"></div><span class="text-xs font-medium">Sunset</span>
          </div>
           <div class="theme-preview p-3" data-theme="auto" aria-label="Auto theme" title="Auto (System) Theme">
            <div class="theme-preview-check"><svg class="h-4 w-4 text-white" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path></svg></div>
            <div class="theme-color-box" style="background: linear-gradient(90deg,#6366f1 0%,#7c3aed 100%);"></div><span class="text-xs font-medium">Auto (System)</span>
          </div>
        </div>
      </div>

      <div class="glass-card animated-border rounded-xl p-6 settings-section">
        <h2 class="text-xl font-semibold mb-6 flex items-center gap-2.5">
          <svg class="h-6 w-6 text-yellow-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10m16-5H4m16 0l-3.464 3.464M20 12l-3.464-3.464M4 7h16v10H4V7z" /></svg>
          Data Management
        </h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <button id="import-data-btn" class="btn-secondary text-sm w-full py-2.5 rounded-md flex items-center justify-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>
                Import Data
            </button>
            <input type="file" id="import-file" class="hidden" accept=".json">
            <button id="export-data-btn" class="btn-secondary text-sm w-full py-2.5 rounded-md flex items-center justify-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" /></svg>
                Export Data
            </button>
        </div>
        <button id="reset-settings" class="mt-4 bg-red-600 hover:bg-red-700 text-white text-sm w-full py-2.5 rounded-md flex items-center justify-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
            Reset All App Data
        </button>
      </div>
    </div>
  </main>

  <script src="js/main.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/audio.js"></script> <!-- For volume control in settings -->
  <script src="js/settings.js"></script>
  <!-- custom-sequences.js might not be needed here unless settings directly manage them, but better to keep separate -->
  <script src="js/animations.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      if (window.injectAnimatedBackground) injectAnimatedBackground();
      if (window.gsap && !prefersReducedMotion()) {
        gsap.from('#main-navbar', { y: -70, opacity: 0, duration: 0.6, ease: 'power2.out', delay: 0.1 });
         gsap.from(".glass-card.animated-border", {
            opacity: 0, y: 20, duration: 0.5, stagger: 0.1, delay: 0.3, ease: "power2.out"
        });
      }
       // Mobile menu toggle
      const mobileMenuButton = document.getElementById('mobile-menu-button');
      const mobileMenu = document.getElementById('mobile-menu');
      if (mobileMenuButton && mobileMenu) {
        mobileMenuButton.addEventListener('click', () => {
          const isHidden = mobileMenu.classList.contains('hidden');
           if (window.gsap && !prefersReducedMotion()){
            if(isHidden) {
                mobileMenu.classList.remove('hidden');
                gsap.fromTo(mobileMenu, {height: 0, opacity: 0}, {height: 'auto', opacity: 1, duration: 0.3, ease: 'power1.out'});
            } else {
                gsap.to(mobileMenu, {height: 0, opacity: 0, duration: 0.3, ease: 'power1.in', onComplete: () => mobileMenu.classList.add('hidden')});
            }
          } else {
            mobileMenu.classList.toggle('hidden');
          }
           mobileMenuButton.setAttribute('aria-expanded', !isHidden);
        });
      }
    });
  </script>
</body>
</html>