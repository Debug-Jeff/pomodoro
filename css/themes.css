:root {
  --font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  --text-opacity-default: 0.9; /* Default text opacity for better readability */
}

body {
  font-family: var(--font-sans);
  color: rgb(var(--foreground) / var(--text-opacity-default));
  background-color: rgb(var(--background));
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Default (Dark Theme) */
body,
body.theme-dark {
  --primary-rgb: 99, 102, 241; /* Indigo-500 */
  --primary-hover-rgb: 79, 70, 229; /* Indigo-600 */
  --primary-focus-ring-rgb: 99, 102, 241; /* Indigo-500 for focus rings */
  --primary-foreground-rgb: 255, 255, 255;

  --secondary-rgb: 139, 92, 246; /* Violet-500 for gradients */

  --background-rgb: 18, 18, 20; /* Near black */
  --foreground-rgb: 229, 231, 235; /* Gray-200 */

  --card-background-rgb: 28, 28, 32; /* Slightly lighter than bg */
  --card-border-rgb: 55, 65, 81; /* Gray-700 for subtle borders */
  --card-foreground-rgb: 209, 213, 219; /* Gray-300 */

  --muted-foreground-rgb: 156, 163, 175; /* Gray-400 */
  --input-background-rgb: 42, 42, 48; /* Darker input fields */

  --destructive-rgb: 239, 68, 68; /* Red-500 */
  --success-rgb: 34, 197, 94; /* Green-500 */
  --info-rgb: 59, 130, 246; /* Blue-500 */

  /* Specific UI Elements */
  --timer-ring-stroke: rgb(var(--primary-rgb));
  --timer-progress-bar-from: rgb(var(--primary-rgb));
  --timer-progress-bar-to: rgb(var(--secondary-rgb));
  --nav-bg: rgba(18, 18, 20, 0.6);
  --nav-border: rgba(255, 255, 255, 0.08);
  --glass-card-bg: rgba(28, 28, 32, 0.75); /* Darker glass */
  --glass-card-border: rgba(255, 255, 255, 0.07);
  --slider-track-bg: linear-gradient(90deg, rgb(var(--primary-rgb)) 0%, rgb(var(--secondary-rgb)) 100%);
  --slider-thumb-border: rgb(var(--primary-rgb));
  --toggle-active-bg: rgb(var(--primary-rgb));
}

body.theme-dim {
  --primary-rgb: 124, 58, 237; /* Violet-600 */
  --primary-hover-rgb: 109, 40, 217; /* Violet-700 */
  --primary-focus-ring-rgb: 124, 58, 237;
  --primary-foreground-rgb: 255, 255, 255;

  --secondary-rgb: 99, 102, 241; /* Indigo-500 */

  --background-rgb: 30, 41, 59; /* Slate-800 */
  --foreground-rgb: 203, 213, 225; /* Slate-300 */

  --card-background-rgb: 49, 60, 78; /* Slate-700 (approx) */
  --card-border-rgb: 71, 85, 105; /* Slate-600 */
  --card-foreground-rgb: 177, 189, 204; /* Slate-400 (approx) */

  --muted-foreground-rgb: 148, 163, 184; /* Slate-400 */
  --input-background-rgb: 40, 51, 69; /* Darker than card */

  --glass-card-bg: rgba(49, 60, 78, 0.75);
  --nav-bg: rgba(30, 41, 59, 0.6);
}

body.theme-purple {
  --primary-rgb: 139, 92, 246; /* Purple-500 */
  --primary-hover-rgb: 124, 58, 237; /* Purple-600 */
  --primary-focus-ring-rgb: 139, 92, 246;
  --primary-foreground-rgb: 255, 255, 255;

  --secondary-rgb: 167, 139, 250; /* Purple-400 */

  --background-rgb: 46, 26, 71; /* Deep Purple */
  --foreground-rgb: 233, 213, 255; /* Lavender white */

  --card-background-rgb: 67, 45, 98; /* Darker purple */
  --card-border-rgb: 87, 55, 128;
  --card-foreground-rgb: 216, 189, 255;

  --muted-foreground-rgb: 196, 169, 235;
  --input-background-rgb: 56, 35, 88;

  --glass-card-bg: rgba(67, 45, 98, 0.75);
  --nav-bg: rgba(46, 26, 71, 0.6);
}

body.theme-ocean {
  --primary-rgb: 14, 165, 233; /* Sky-500 */
  --primary-hover-rgb: 2, 132, 199; /* Sky-600 */
  --primary-focus-ring-rgb: 14, 165, 233;
  --primary-foreground-rgb: 255, 255, 255;

  --secondary-rgb: 56, 189, 248; /* Sky-400 */

  --background-rgb: 15, 23, 42; /* Slate-900 */
  --foreground-rgb: 221, 238, 255; /* Light blueish white */

  --card-background-rgb: 30, 41, 59; /* Slate-800 */
  --card-border-rgb: 51, 65, 85; /* Slate-700 */
  --card-foreground-rgb: 186, 230, 253; /* Sky-200 */

  --muted-foreground-rgb: 163, 209, 254; /* Sky-300 */
  --input-background-rgb: 20, 31, 49;

  --glass-card-bg: rgba(30, 41, 59, 0.75);
  --nav-bg: rgba(15, 23, 42, 0.6);
}

body.theme-sunset {
  --primary-rgb: 249, 115, 22; /* Orange-500 */
  --primary-hover-rgb: 234, 88, 12; /* Orange-600 */
  --primary-focus-ring-rgb: 249, 115, 22;
  --primary-foreground-rgb: 255, 255, 255;

  --secondary-rgb: 251, 146, 60; /* Orange-400 */

  --background-rgb: 31, 15, 15; /* Very dark warm brown/red */
  --foreground-rgb: 255, 237, 213; /* Orange-100 (pale orange) */

  --card-background-rgb: 51, 25, 25; /* Darker warm brown */
  --card-border-rgb: 71, 35, 35;
  --card-foreground-rgb: 254, 215, 170; /* Orange-200 */

  --muted-foreground-rgb: 253, 186, 116; /* Orange-300 */
  --input-background-rgb: 41, 20, 20;

  --glass-card-bg: rgba(51, 25, 25, 0.75);
  --nav-bg: rgba(31, 15, 15, 0.6);
}

/* Global style overrides using CSS variables */
.glass-card {
  background: var(--glass-card-bg);
  border: 1px solid var(--glass-card-border);
  color: rgb(var(--card-foreground-rgb));
}

nav.glass-nav {
  background: var(--nav-bg);
  border-bottom: 1px solid var(--nav-border);
}
nav.glass-nav a span {
  color: rgb(var(--foreground-rgb) / 0.9);
}
nav.glass-nav a:hover span,
nav.glass-nav a[aria-current="page"] span {
  color: rgb(var(--foreground-rgb)) !important; /* Ensure override */
}
nav.glass-nav a[aria-current="page"] {
   border-color: rgba(var(--primary-rgb), 0.5);
   background: rgba(var(--primary-rgb), 0.08);
}


/* Timer Specifics */
#timer-progress {
  stroke: var(--timer-ring-stroke);
}
#progress-bar {
  background: linear-gradient(90deg, var(--timer-progress-bar-from) 0%, var(--timer-progress-bar-to) 100%);
}

/* Buttons */
.btn-primary {
  background-color: rgb(var(--primary-rgb));
  color: rgb(var(--primary-foreground-rgb));
}
.btn-primary:hover {
  background-color: rgb(var(--primary-hover-rgb));
}
.btn-secondary {
  background-color: rgb(var(--muted-foreground-rgb) / 0.3);
  color: rgb(var(--foreground-rgb));
}
.btn-secondary:hover {
  background-color: rgb(var(--muted-foreground-rgb) / 0.5);
}

/* Mode Buttons */
.mode-btn[aria-pressed="true"] {
  background: linear-gradient(90deg, rgb(var(--primary-rgb)) 60%, rgb(var(--secondary-rgb)) 100%);
  color: rgb(var(--primary-foreground-rgb));
}
.mode-btn[aria-pressed="true"]::after {
  background: linear-gradient(90deg, rgb(var(--primary-rgb)) 60%, rgb(var(--secondary-rgb)) 100%);
}
.mode-btn:not([aria-pressed="true"]):hover {
  background: rgba(var(--primary-rgb),0.08);
  color: color-mix(in srgb, rgb(var(--primary-rgb)) 80%, white);
}


/* Settings Sliders */
.slider {
  background: var(--slider-track-bg);
}
.slider::-webkit-slider-thumb {
  border: 3px solid var(--slider-thumb-border);
}
.slider:focus::-webkit-slider-thumb {
  border-color: rgb(var(--secondary-rgb));
}
.slider::-moz-range-thumb {
  border: 3px solid var(--slider-thumb-border);
}
.slider:focus::-moz-range-thumb {
  border-color: rgb(var(--secondary-rgb));
}


/* Settings Toggles */
.toggle-container input:checked + .toggle-slider {
  background-color: var(--toggle-active-bg);
}
.toggle-container input:focus + .toggle-slider {
  box-shadow: 0 0 1px var(--toggle-active-bg);
}

/* Theme Previews in Settings */
.theme-preview.active {
  border-color: rgb(var(--primary-rgb)) !important;
}
.theme-preview .theme-preview-check {
  background: rgb(var(--primary-rgb));
}
#theme-dark .theme-color-box { background: #6366f1; } /* Indigo */
#theme-dim .theme-color-box { background: #7c3aed; } /* Violet */
#theme-purple .theme-color-box { background: #8b5cf6; } /* Purple */
#theme-ocean .theme-color-box { background: #0ea5e9; } /* Sky */
#theme-sunset .theme-color-box { background: #f97316; } /* Orange */
#theme-auto .theme-color-box { background: linear-gradient(90deg, #6366f1 0%, #7c3aed 100%); }


/* Input fields */
input[type="text"], select {
  background-color: rgb(var(--input-background-rgb));
  color: rgb(var(--foreground-rgb));
  border: 1px solid rgb(var(--card-border-rgb));
}
input[type="text"]:focus, select:focus {
  border-color: rgb(var(--primary-rgb));
  box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.3);
  outline: none;
}
.glass-dropdown { /* Overrides for the specific class if needed, or integrate general select */
    background: rgb(var(--input-background-rgb) / 0.8); /* More transparent for glass effect */
    border: 1px solid rgba(var(--primary-rgb), 0.2);
}
.glass-dropdown option {
    background: rgb(var(--background-rgb));
    color: rgb(var(--foreground-rgb));
}

/* Chart.js text color */
.chartjs-render-monitor { /* Default chart text color */
    color: rgb(var(--muted-foreground-rgb)) !important;
}

/* Ensure Tailwind's bg-indigo-600 etc. still work by defining them if needed,
   or prefer using CSS variables for theme-dependent colors.
   For simplicity, Tailwind classes will mostly define structure,
   and theme colors come from CSS variables. */

/* Specific button colors from Tailwind if used directly in HTML */
.bg-indigo-600 { background-color: rgb(var(--primary-rgb)) !important; }
.hover\:bg-indigo-700:hover { background-color: rgb(var(--primary-hover-rgb)) !important; }
.bg-red-600 { background-color: rgb(var(--destructive-rgb)) !important; }
.hover\:bg-red-700:hover { background-color: color-mix(in srgb, rgb(var(--destructive-rgb)) 90%, black) !important; }
.bg-green-600 { background-color: rgb(var(--success-rgb)) !important; }
.hover\:bg-green-700:hover { background-color: color-mix(in srgb, rgb(var(--success-rgb)) 90%, black) !important; }
.bg-blue-600 { background-color: rgb(var(--info-rgb)) !important; }
.hover\:bg-blue-700:hover { background-color: color-mix(in srgb, rgb(var(--info-rgb)) 90%, black) !important; }

.text-indigo-400 { color: color-mix(in srgb, rgb(var(--primary-rgb)) 80%, white) !important; }
.text-green-400 { color: color-mix(in srgb, rgb(var(--success-rgb)) 80%, white) !important; }
.text-blue-400 { color: color-mix(in srgb, rgb(var(--info-rgb)) 80%, white) !important; }
.text-purple-400 { color: color-mix(in srgb, rgb(var(--secondary-rgb)) 80%, white) !important; }


/* Ensure dashboard chart ticks and grid lines use theme colors */
.chartjs-render-monitor text { /* This might be too generic, Chart.js options are better */
  fill: rgb(var(--muted-foreground-rgb)) !important;
}
.chartjs-render-monitor line { /* This might be too generic */
  stroke: rgba(var(--muted-foreground-rgb), 0.2) !important;
}
